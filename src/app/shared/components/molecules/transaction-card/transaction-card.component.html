<div 
  class="transaction-card"
  [class.transaction-card--clickable]="clickable"
  (click)="onCardClick()"
  [attr.aria-label]="'Tarjeta de transacción ' + transaction.transactionReference">
  
  <!-- Header: ID + Estado + Monto -->
  <div class="transaction-header">
    <!-- Fila 1: ID + Fecha -->
    <div class="transaction-row-id-date">
      <span class="transaction-id-text">{{ transaction.transactionReference }}</span>
      <p class="transaction-status-date">{{ formatDateTime(transaction.createdAt) }}</p>
    </div>
    
    <!-- Fila 2: Estado -->
    <div class="transaction-status">
      <div class="transaction-status-icon-wrapper">
        <app-icon
          [name]="getStatusIcon()"
          [size]="'md'">
        </app-icon>
      </div>
      <div class="transaction-status-info">
        <p class="transaction-status-title">{{ getStatusTitle() }}</p>
      </div>
    </div>

    <!-- Fila 3: Monto + Método de Pago -->
    <div class="transaction-row-combined">
      <!-- Monto -->
      <div class="transaction-amount">
        <p class="transaction-amount-value">{{ formatCurrency(transaction.amount) }}</p>
        <p 
          *ngIf="showDeduction && transaction.deduction && transaction.deduction > 0"
          class="transaction-deduction">
          - {{ formatCurrency(transaction.deduction) }}
        </p>
      </div>

      <!-- Método de Pago -->
      <div class="transaction-detail-item">
        <div class="transaction-detail-icon">
          <img 
            [src]="getPaymentMethodLogo()" 
            [alt]="'Logo ' + transaction.paymentMethod"
            class="payment-method-logo">
        </div>
        <span class="transaction-detail-text">{{ getPaymentMethodDisplay() }}</span>
      </div>
    </div>

    <!-- Fila 4: Tipo de Venta -->
    <div class="transaction-detail-item">
      <div class="transaction-detail-icon">
        <app-transaction-status-icon
          [type]="getSalesTypeIcon()"
          [size]="'sm'">
        </app-transaction-status-icon>
      </div>
      <span class="transaction-detail-text-secondary">{{ getSalesTypeText() }}</span>
    </div>
  </div>
</div>


